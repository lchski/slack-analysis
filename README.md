# Slack analysis

This repository contains R scripts to convert a [Slack channel export](https://slack.com/intl/en-ca/help/articles/204897248-Guide-to-Slack-import-and-export-tools) (a ZIP folder of per-channel, per-day JSON files) into a single structured CSV file.

## Installing / first-run

### 1. Install R and RStudio

You can install R source files or binaries from <https://cran.rstudio.com/>. 

R version `3.6.*` is recommended in this case for package compatibility.

RStudio can be installed from <https://rstudio.com/products/rstudio/download/#download>.

### 2. Clone this repository to a local folder

From a Terminal window, enter the following (from the desired folder location):

```
git clone git@github.com:lchski/slack-analysis.git
```

### 3. Open the slack-analysis folder as an RStudio project

In RStudio, go to “File > Open Project…” then choose the newly-cloned slack-analysis folder. 

### 3. Install R packages

Once R and RStudio are installed, assuming they both work together happily, open RStudio and run these commands one at a time from the RStudio “Console” (should be open automatically):

```
install.packages("tidyverse")

install.packages("lubridate")

install.packages("janitor")

install.packages("jsonlite”)
```

You’re now ready to go!

## Converting a Slack export to CSV

### 1. Initiate a Slack channel export, for a specified date range

Slack channel exports can be [generated and downloaded from the Slack admin interface](https://slack.com/intl/en-ca/help/articles/204897248-Guide-to-Slack-import-and-export-tools) (these require admin permissions for a given Slack organization).

The **time period** required should be set at the moment when the Slack channel export is initiated (e.g. “May 1 to June 30”). 

The channel export includes all public channels (not private channels or direct messages). 

### 2. Unzip the export and put it in the “source” folder

Unzip the ZIP file generated by Slack, rename the unzipped folder “export”, and put it into the `data/source` folder. The “export” folder should contain a series of folders for each channel, which individually contain JSON files for each day where messages exist.

### 3. Open and run `load.R`

In the RStudio project, open `load.R` and run it section by section (beginning with the library package commands).

You can use “Command-Enter” as a keyboard shortcut to run each section. Some sections loading messages may take a minute or two to complete.

After each section has run successfully, the messages will have been loaded into the R environment.

_(You can also enter `source("load.R")` in the Console to run the whole load script, instead of doing it section by section. If there are errors, though, they can be easier to debug when running it section by section.)

### 4. Export a CSV file of relevant channels

Open `analysis/en.R` and update the filter for which channel (“conversation”) to include the channels you want in the CSV export ([line 4](https://github.com/lchski/slack-analysis/blob/master/analysis/en.R#L4)). You can use `|` to include multiple channels; partial matches on channel name work.

If desired, change the CSV output location ([line 35](https://github.com/lchski/slack-analysis/blob/master/analysis/en.R#L35)). 

Run each section of code in `en.R` in sequence. When complete, you’ll have a CSV export in the specified location. 

## Converting to other formats

You can use the [slack-csv-export-parsing](https://github.com/sboots/slack-csv-export-parsing) tool to convert the resulting CSV file into a linear HTML document that can then be converted to Word or PDF.
